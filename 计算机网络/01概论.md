# 第一章-课程概论
***
## 1.计算机网络在信息时代的作用
21世纪一个重要的特征是：数字化，网络化，信息化，网络是核心
#### 网络的一些类别
电信网络：向用户提供电话，电报以及传真等服务
有线电视网络：传送各种电视节目
计算机网络：使用户能够在计算机之间传送数据文件，**发展最快，也是起核心作用**
#### 计算机网络的发展
以 Internet 为代表，是由数量极大的各种计算机网络互连起来的，供全球使用的商业网络
对于仅在局部范围互连起来的计算机网络，只能称之为 ***互连网***，而不是互联网
#### 互联网的重要基本特点
连通性，共享（资源）
#### 互联网的一些负面作用
计算机病毒的传播，谣言的散布，游戏，不良信息......加强互联网的管理，使它的正面积极的作用成为互联网的主流
***
## 2.互联网概述
#### 网络的网络
计算机网络(简称为网络)是由若干**结点**和连接这些结点的**链路**组成。网络中的结点可以是计算机、集线器等
网络之间可以通过**路由器**互连起来，构成一个覆盖范围更大的计算机网络，这样的网络称之为 ***互连网***
与网路相连的计算机常称之为**主机**，也可以把连接在计算机网络上的智能手机称之为主机，主机是为用户进行信息处理的
#### 互联网基础结构发展的三个阶段
网络的演进是一个渐变的过程
1. 从单个网络 ARPANET 向互连网发展
1983 年TCP/IP协议成为 ARPANET 上的标准协议，使得所有使用TCP/IP协议的计算机都能利用互连网相互信，因而人们就把1983年作为互联网的诞生时间。
>以小写字母i开始的internet (互连网)是一个通用名词，它泛指由多个计算机网络互连而成的计算机网络。在这些网络之间的通信协议(即通信规则)可以任意选择，不一定非要使用TCP/IP协议。
以大写字母I开始的Internet (互联网，或因特网)则是一个专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定互连网，它采用TCP/IP协议作为通信的规则，且其前身是美国的ARPANET
2. 建成了三级结构的互联网
主干网-地区网-校园网（或者企业网）
3. 逐渐形成了多层次ISP结构的互联网
ISP分为不同层次，主干ISP，地区ISP，本地ISP
从原理上讲，只要每一个本地ISP都安装了路由器连接到某个地区ISP， 而每一个地区ISP也有路由器连接到主干ISP， 那么在这些相互连接的ISP的共同合作下，就可以完成互联网中的所有的分组转发任务。但随着互联网上数据流量的急剧增长，人们开始研究如何更快地转发分组，以及如何更加有效地利用网络资源。于是，互联网交换点IXP (InterneteXchange Point)就应运而生了。
>互联网交换点IXP主要作用就是允许两个网络直接相连并交换分组，不需要第三个网络来转发分组

#### 互联网的标准化工作
+ 制定标准的一个很大特点是：面向大众
+ 制定的过程: 
> 互联网草案->建议标准->互联网标准
***
## 3.互联网的组成
#### 资源子网（边缘部分）
是用户直接使用的，即连接在互联网上的所有主机，又称为**端系统**，用来进行通信（传送数据、音频或视频）和资源共享
>“主机A和主机B进行通信”，实际上是指:“运行在主机A上的某个程序和运行在主机B上的另一个程序进行通信”。由于“进程”就是“运行着的程序”，因此这也就是指:“主机A的某个进程和主机B上的某个进程进行通信”。可以简称为“计算机之间通信”

>端系统之间的通信方式分为两大类：客户-服务器（C/S方式）和对等方式（P2P方式）
>>客户-服务器方式：
最常用，也是最传统的，比如电子邮件的发送，在网上查找资料。**客户**和**服务器**都是指通信中所涉及的两个应用进程，该方式也就是描述进程之间服务与被服务的关系
***客户是服务器请求方，服务器是服务提供方***
客户程序特点：
1.必须知道服务器的地址
2.不需要特殊的硬件和复杂的操作系统
服务器程序的特点：
1.可以同时处理多个远地或本地客户的请求
2.系统启动后即自动调用并一直不断的运行，被动接受请求
3.一般需要强大的硬件和高级的操作系统支持
>>对等方式：
在通信时不区分哪个是服务请求方哪个是服务提供方，可支持大量对等用户同时工作
#### 通信子网（核心部分）
最复杂的部分，由大量网络的连接这些网络的路由器组成，提高连通性和交换。
>电路交换：
以电话通信为例，从通信资源的分配角度来看，交换就是按照某种方式动态地分配传输线路的资源。在使用电路交换通话之前，必须先拨号请求建立连接。当被叫用户听到交换机送来的振铃音并摘机后，从主叫端到被叫端就建立了一条连接，也就是一条专用的物理通路。这条连接保证了双方通话时所需的通信资源，而这些资源在双方通信时不会被其他用户占用。此后主叫和被叫双方就能互相通电话。通话完毕挂机后，交换机释放刚才使用的这条专用的物理通路(即把刚才占用的所有通信资源归还给电信网)。
这种必须经过“建立连接(占用通信资源)→通话(一直占用通信资源，这是一个重要特征)→释放连接(归还通信资源)”三个步骤的交换方式称为**电路交换**。
如果用户在拨号呼叫时电信网的资源已不足以支持这次的呼叫，则主叫用户会听到忙音，表示电信网不接受用户的呼叫，用户必须挂机，等待一段时间后再重新拨号。

>路由器是一种专用计算机（但不叫做主机），它是实现**分组交换**的关键构件，任务是**转发收到的分组**
>>分组交换：
采用**存储转发**技术，把要发送的整块数据称为一个**报文**，发送报文前要把较长的报文划分为一个个更小的等长数据端，在每个数据段前加上一些由必要的控制信息组成的**首部**后，就形成了一个**分组**，分组又称为“包”，分组的首部也可以称为**包头**。***分组是在互联网中传送的数据单元***。分组交换在传送数据之前不必先占用一条端对端的链路的通信资源，分组在哪段链路上传送才占用这段链路的通信资源。分组到达一个路由器后，先暂时存储下来，查找转发表，然后从一条合适的链路转发出去。分组在传输时就这样一段一段地断续占用通信资源，而且还省去了建立连接和释放连接的开销，因而传输效率更高
当网络中的某些结点或链路突然出现故障时，在各路由器中运行的路由选择**协议**能够自动找到转发分组最合适的路径
***分组交换的实质时采用了在数据通信的过程中断续（或动态）分配传输带宽的策略***
为了提高分组交换网的可靠性，互联网的核心部分常采用*网状拓扑结构*，使得当发生网络拥塞或少数结点、链路出现故障时，路由器可灵活地改变转发路由而不致引起通信的中断或全网的瘫痪。此外，通信网络的主干线路往往由一些高速链路构成，这样就可以较高的数据率迅速地传送计算机数据。
>>分组交换的优点总结：
>>+ 高效，在分组传输过程中动态分配传输带宽，对通信链路是逐段占用
>>+ 灵活，为每一个分组独立地选择最合适的转发路由
>>+ 迅速，以分组作为传送单位，可以不先建立连接就可以向其他主机发送分组
>>+ 可靠，网络协议保障，分布式多路由的分组交换网，使网络有很好的生存性
>>>分组交换带来的问题：
>>>+ 分组在各路由器存储转发时需要排队，这就会造成一定的时延。
>>>+ 由于分组交换不像电路交换那样通过建立连接来保证通信时所需的各种资源，因而无法确保通信时端到端所需的带宽。
>>>+ 各分组必须携带的控制信息也造成了一定的开销。整个分组交换网还需要专门的管理和控制机制。

在互联网核心部分的路由器之间一般都用高速链路相连接，而在网络边缘的主机接入到核心部分则通常以相对较低速率的链路连接
***
## 4.互联网在我国的发展
1980年铁道部最早着手建设专用计算机广域网，1989年11月第一个公用分组交换网CNPAC建成运行，与此同时，自20世纪80年代起，国内许多单位相继安装了大量的局域网，局域网成本低，便于开发，管理，维护。
1994年4月20日，我国用64kbit/s专线正式连入互联网，标志这我国被国际上正式承认为接入互联网的国家。
>我国陆续建造了基于互联网技术并能够和互联网互联的多个全国范围的公用计算机网络，其中规模最大的五个是：
>+ 中国电信互联网CHINANET（也就是原来的中国公用计算机互联网）
>+ 中国联通互联网UNINET
>+ 中国移动互联网CMNET
>+ 中国教育和科研计算机网CERNET
>+ 中国科学技术网CSTNET
***
## 5.计算机网络的类别
#### 计算机网络的定义
精确定义并未统一
>较好的定义是这样的：
计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的(例如，传送数据或视频信号)。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。
根据这个定义: (1) 计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机。(2)计算机网络并非专门用来传送数据，而是能够支持很多种的应用(包括今后可能出现的各种应用)。
***请注意，上述的“可编程的硬件”表明这种硬件一定包含有中央处理机CPU。***
#### 几种不同类别的计算机网络
> *按照网络的作用范围进行分类:*
(1)广域网WAN (Wide Area Network)，广域网的作用范围通常为几十到几千公里，因而有时也称为远程网(long haul network)。广域网是互联网的核心部分，其任务是通过长距离(例如，跨越不同的国家)运送主机所发送的数据。连接广域网各结点交换机的链路一般都是高速链路，具有较大的通信容量。
(2)城域网MAN (Metropolitan Area Network)，城域网的作用范围一般是一个城市，可跨越几个街区甚至整个城市，其作用距离约为5 ~ 50 km。城域网可以为一个或几个单位所拥有，但也可以是一种公用设施，用来将多个局域网进行互连。目前很多城域网采用的是以太网技术，因此有时也常并入局域网的范围进行讨论。
(3)局域网LAN (Local Area Network)，局域网一般用微型计算机或工作站通过高速通信线路相连(速率通常在10 Mbit/s以上)，但地理上则局限在较小的范围(如1 km左右)。在局域网发展的初期，一个学校或工厂往往只拥有一个局域网，但现在局域网已非常广泛地使用，学校或企业大都拥有许多个互连的局域网(这样的网络常称为校园网或企业网)。
(4)个人区域网PAN (Personal Area Network)，个人区域网就是在个人工作的地方把属于个人使用的电子设备(如便携式电脑等)用无线技术连接起来的网络，因此也常称为无线个人区域网WPAN (Wireless PAN)，其范围很小，大约在10 m左右。
顺便指出，若中央处理机之间的距离非常近(如仅1米的数量级或甚至更小些)，则一船就称之为**多处理机系统**而不称它为计算机网络

>*按照网络的使用者进行分类*
(1)公用网(public network)，这是指电信公司(国有或私有)出资建造的大型网络。“公用”的意思就是所有愿意按电信公司的规定交纳费用的人都可以使用这种网络。因此公用网也可称为公众网。
(2)专用网(private network)，这是某个部门为满足本单位的特殊业务工作的需要而建造的网络。这种网络不向本单位以外的人提供服务。例如，军队、铁路、银行、电力等系统均有本系统的专用网。
公用网和专用网都可以提供多种服务。如传送的是计算机数据，则分别是公用计算机网络和专用计算机网络。

>*用来把用户接入到互联网的网络*
这种网就是*接入网*AN(Access Network)，又称之为**本地接入网**或**居民接入网**，由于从用户家中接入到互联网可以使用的技术有许多种，因此就出现了可以使用多种接入网技术连接到互联网的情况。接入网本身既不属于互联网的核心部分，也不属于边缘部分。接入网是从某个用户端系统到互联网中的第一个路由器(也称为边缘路由器)之间的一种网络。从覆盖的范围看，很多接入网还属于局域网。从作用上看，接入网只是起到让用户能够与互联网连接的“桥梁”作用。由于出现了多种带宽接入技术，宽带接入网才成为一个热点
***
## 6.机算机网络的性能
几个主要的性能指标和一些非性能特征
>常用的七个性能指标：
>+ **速率**，指数据的传送速率，又称数据率或比特率，单位是**bit/s（比特每秒）**，k($10^3$)，M($10^6$)，G($10^9$)，T($10^{12}$)，P，E，Z，Y...
在提到网络速率时，往往指的是**额定速率或标称速率**，而非网络上实际运行的速率
>+ **带宽**，表示网络中某**通道**传送数据的能力，即在单位时间内网络中的某信道所能通过的“**最高数据率**”，单位是**bit/s**
>>带宽本来是指某个**信号具有的频带宽度**。信号的带宽是指该信号所包含的各种不同频率成分所占据的频率范围。这种意义的单位是**赫兹**
在“带宽"的上述两种表述中，前者为**时域**称谓，而后者为**频域**称谓，其本质是相同的。也就是说一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。
>+ **吞吐量**，表示在单位时间内通过某个网络(或信道、接口)的实际的数据量。吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。吞吐量受网络的带宽或网络的额定速率的限制。吞吐量有时还可以用每秒传送的字节数或帧数表示
>+ **时延**，指数据(一个报文或分组，甚至比特)从网络(或链路)的一端传送到另一端所需的时间。时延是个很重要的性能指标，它有时也称为**延迟或迟延**。
需要注意的是，网络中的时延是由以下几个不同的部分组成的:
(1) **发送时延**，是主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。
$${发送时延}=\frac{数据帧长度（bit）}{发送速率（bit/s）}$$
发送时延并非固定不变，而是与发送的帧长成*正比*，与发送速率成*反比*
(2)**传播时延**，是电磁波在信道中传播一定距离需要花费的时间。
$$传播时延=\frac{信道长度（m）}{电磁波在信道上的传播速率（m/s）}$$
电磁波在自由空间的传播速率是光速，即$3.0*10^5 km/s$。电磁波在网络传输媒体中的传播速率比在自由空间要略低一些:在铜线电缆中的传播速率约为$2.3*10^5 km/s$， 在光纤中的传播速率约为$2.0*10^5 km/s$。例如，1000 km长的光纤线路产生的传播时延大约为5ms。
发送时延发生在机器内部的发送器中（一般就是发生在网络适配器中），***与传输信道的长度(或信号传送的距离)无关*** 。但传播时延则发生在机器外部的传输信道媒体上，而 ***与信号的发送速率无关*** 。信号传送的距离越远，传播时延就越大。
(3)**处理时延**，主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等，这就产生了处理时延。
(4)**排队时延**，分组在经过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发，这就产生了排队时延。排队时延的长短往往取决于网络当时的通信量。当网络的通信量很大时会发生队列溢出，使分组丢失，这相当于排队时延为无穷大。
数据在网络中经历的**总时延**就是以上四种时延之和：$$总时延=发送时延+传播时延+处理时延+排队时延$$
>+ **时延带宽积**，$时延带宽积=传播时延*带宽$，又称为**以比特为单位的链路长度**
>+ **往返时间RTT(Round-Trip Time)**，双向交互一次所需要的时间，包括各中间结点的处理时延、排队时延、发送时延
$$发送时间=\frac{数据长度}{发送速率}$$
给出RTT数值可得：
$$有效数据率=\frac{数据长度}{发送时间+RTT}$$
>+ **利用率**，有*信道利用率*和*网络利用率*两种。信道利用率指出某信道有百分之几的时间是被利用的(有数据通过)。完全空闲的信道的利用率是零。网络利用率则是全网络的信道利用率的加权平均值。信道利用率并非越高越好。这是因为，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。当网络的通信量很少时，网络产生的时延并不大。但在网络通信量不断增大的情况下，由于分组在网络结点(路由器或结点交换机)进行处理时需要排队等候，因此网络引起的时延就会增大。$D=\frac{D0}{1-U}$，D0:网络空闲时的时延，D:网络当前的时延，U:网络利用率（在0~1之间）

> 非性能特征：
>+ **费用**，包括设计和实现的费用，一般来说，网络的速率越高，其价格也越高
>+ **质量**，取决于网络中所有构件的质量，以及这些构件是怎样组成网络的。质量影响到很多方面，如网络的可靠性，网络管理的简易性，以及网络的一些性能（与质量并不是一回事）
>+ **标准化**，网络硬件和软件的设计应遵循国际标准，这样可以得到更好的互操作性，更易于升级换代和维修，更容易得到技术上的支持
>+ **可靠性**，高速网络的可靠性不一定很差，但高速网络要可靠地运行，则往往更加困难，同时所需要的费用也比较高
>+ **可拓展性和可升级性**，在构造网络时就应当考虑到今后可能会需要扩展(即规模扩大)和升级(即性能和版本的提高)。网络的性能越高，其扩展费用往往也越高，难度也会相应增加。
>+ **易于管理和维护**
***
## 7.计算机网络体系结构
最基本的是，分层次的体系结构
#### 协议与划分层次
明确规定了所交换的数据的格式以及有关的同步问题（广义，含有时序的意思）
**网络协议**由以下三个要素组成：
+ 语法，即数据与控制信息的结构或格式
+ 语义，即需要发出何种控制信息，完成何种动作以及做出何种响应
+ 同步，即事件实现顺序的详细说明
协议通常有两种不同的形式。一种是使用便于人来阅读和理解的文字描述。另一种是使用让计算机能够理解的程序代码。这两种不同形式的协议都必须能够对网络上的信息交换过程做出精确的解释。
>分层：
（1）各层之间是独立的
（2）灵活性好
（3）结构上可分割开
（4）易于实现和维护
（5）能促进标准化工作
>>通常各层所要完成的功能主要有以下一些(可以只包括一种，也可以包括多种):
①差错控制
使相应层次对等方的通信更加可靠。
②流量控制
发送端的发送速率必须使接收端来得及接收，不要太快。
③分段和重装
发送端将要发送的数据块划分为更小的单位，在接收端将其还原。
④复用和分用
发送端几个高层会话复用一条低层的连接，在接收端再进行分用。
⑤连接建立和释放
交换数据前先建立一条逻辑连接，数据传送结束后释放连接。

***计算机网络的各层及其协议的集合就是网络的体系结构。*** 换种说法，计算机网络的体系结构就是这个计算机网络及其构件所应完成的功能的精确定义。 ***体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件***  
五层协议的体系结构：
>应用层
运输层
网络层
数据链路层
物理层

#### 实体、协议、服务和服务访问点
**实体**：表示任何可发送或接收信息的硬件或软件进程。在许多情况下，实体就是一个特定的软件模块。
**协议**：是控制两个对等实体(或多个实体)进行通信的规则的集合。协议的语法方面的规则定义了所交换的信息的格式，而协议的语义方面的规则就定义了发送者或接收者所要完成的操作，例如，在何种条件下，数据必须重传或丢弃。**在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面一层所提供的服务。**
**下面的协议对上面的实体是透明的**
**协议是“水平的”，而服务是“垂直的”**
在同一体系中相邻两层的实体进行交互（即交换信息的地方）通常称为**服务访问点**
对等层次间传送的数据单位称为该层的**协议数据单元PDU**
层与层之间传送的数据单位称为**服务数据单元SDU**
***运输层最重要的协议是TCP和UDP协议，而网络层最重要的协议是IP协议。***
